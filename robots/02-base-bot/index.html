
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Resources for teaching Micropython to CoderDojo Twin Cities students." name="description"/>
<meta content="Dan McCreary" name="author"/>
<link href="../../assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-6.2.5" name="generator"/>
<title>Base Bot - MicroPython</title>
<link href="../../assets/stylesheets/main.15aa0b43.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.75751829.min.css" rel="stylesheet"/>
<meta content="" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
</head>
<body data-md-color-accent="#41bac1" data-md-color-primary="#642580" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#raspberry-pi-pico-micropython-base-robot">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="MicroPython" class="md-header-nav__button md-logo" href="../.." title="MicroPython">
<img alt="logo" src="../../img/coderdojo-logo.png"/>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<div class="md-header-nav__topic">
<span class="md-ellipsis">
            MicroPython
          </span>
</div>
<div class="md-header-nav__topic">
<span class="md-ellipsis">
            
              Base Bot
            
          </span>
</div>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/CoderDojoTC/micropython/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    micropython repo
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="MicroPython" class="md-nav__button md-logo" href="../.." title="MicroPython">
<img alt="logo" src="../../img/coderdojo-logo.png"/>
</a>
    MicroPython
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/CoderDojoTC/micropython/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    micropython repo
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="https://coderdojotc.github.io/CoderDojoTC/">
        CoderDojo Mentor Resources
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Micropython Home
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3">
        Getting Started
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Getting Started" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-3">
<span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../01-intro/">
        Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../01a-microcontrollers.md">
        Microcontrollers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02-boards/">
        Boards
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-suggested-parts/">
        Suggested Parts
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02b-accessories/">
        Accessories
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02-pi-pico/">
        Raspberry Pi Pico
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02-esp32/">
        ESP32
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02c-thonny/">
        Thonny IDE
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../01b-libraries.md">
        Python Libraries
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/>
<label class="md-nav__link" for="nav-4">
        MicroPython Examples
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="MicroPython Examples" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-4">
<span class="md-nav__icon md-icon"></span>
          MicroPython Examples
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-blink/">
        Blink
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-button/">
        Button
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-temperature/">
        Temperature
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../04-servo/">
        Servo
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../05-led-strip/">
        LED Strip
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../10-displays/">
        Displays
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../10-character-lcd-display/">
        Character LCD
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" id="nav-5" type="checkbox"/>
<label class="md-nav__link" for="nav-5">
        Sensors
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Sensors" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-5">
<span class="md-nav__icon md-icon"></span>
          Sensors
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../sensors/01-intro/">
        Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sensors/02-photosensor.md">
        Photosensor
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sensors/03-ping/">
        Ping Distance
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sensors/06-bme280/">
        Temp,Humidity, Pres
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sensors/02-pot/">
        Potentiometer
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sensors/05-ping.md">
        Ultrasonic Distance
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sensors/bme280/">
        Environmental Sensor
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sensors/06-accelerometer-compass/">
        Accelerometer Compass
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sensors/07-VL53L0X_GY/">
        Time of Flight Distance
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" id="nav-6" type="checkbox"/>
<label class="md-nav__link" for="nav-6">
        Displays
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Displays" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-6">
<span class="md-nav__icon md-icon"></span>
          Displays
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../displays/7-segment-display/">
        7 Segment Display
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" id="nav-7" type="checkbox"/>
<label class="md-nav__link" for="nav-7">
        OLED Displays
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="OLED Displays" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-7">
<span class="md-nav__icon md-icon"></span>
          OLED Displays
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/01-oled-intro/">
        Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/02-oled-setup/">
        Setup
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/03-oled-drawing/">
        Drawing
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/11-oled-ssd1306-i2c/">
        OLED SSD1306 I2C
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/12-oled-ssd1306-spi-v1/">
        OLED SSD1306 SPI V1
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/11-oled-ssd1306-spi/">
        OLED SSD1306 SPI V2
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/11-oled-sh1106-i2c/">
        OLED SH1106 I2C Example
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/10-oled-bounce/">
        OLED Bounce
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/12-oled-pot/">
        OLED Pot
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/11-oled-ping/">
        OLED Ping
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/11-pong/">
        OLED Pong
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/13-pixel-draw/">
        OLED Pixel Draw
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/15-oled-patterns/">
        OLED Patterns
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/14-random-hearts/">
        Random Hearts
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../oled/40-oled-references/">
        OLED References
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" id="nav-8" type="checkbox"/>
<label class="md-nav__link" for="nav-8">
        Sound and Music
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Sound and Music" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-8">
<span class="md-nav__icon md-icon"></span>
          Sound and Music
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../sound/01-intro/">
        Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sound/02-play-tone/">
        Playing a Tone
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sound/03-play-three-tones/">
        Playing Three Tones
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sound/04-play-scale/">
        Playing a Scale
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sound/05-play-mario/">
        Play Mario
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-9" id="nav-9" type="checkbox"/>
<label class="md-nav__link" for="nav-9">
        Pico Robots
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Pico Robots" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-9">
<span class="md-nav__icon md-icon"></span>
          Pico Robots
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../01-intro/">
        Introduction
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Base Bot
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Base Bot
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#base-robot-design">
    Base Robot Design
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#video">
    Video
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#parts-summary">
    Parts Summary
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hardware-details">
    Hardware Details
  </a>
<nav aria-label="Hardware Details" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#motor-driver">
    Motor Driver
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#time-of-flight-distance-sensor">
    Time-of-Flight Distance Sensor
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#software">
    Software
  </a>
<nav aria-label="Software" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#distance-sensor">
    Distance Sensor
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#testing-the-senser-connections-with-the-i2c-scanner">
    Testing the Senser Connections with the I2C Scanner
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#download-the-vl53l0x-driver">
    Download the VL53L0X Driver
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#time-of-flight-sensor-test">
    Time-of-Flight Sensor Test
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#motor-drive-test">
    Motor Drive Test
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-drive-and-turn-functions">
    Sample Drive and Turn Functions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#turning-logic">
    Turning Logic
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-motor-connections">
    Test Motor Connections
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#drive-functions">
    Drive Functions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#stop-all-motors-program">
    Stop All Motors Program
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#collision-avoidance-logic">
    Collision Avoidance Logic
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#final-program">
    Final Program
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#more-to-explore-labs">
    More To Explore Labs
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../03-face-bot.md">
        Face Bot
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../04-param-bot/">
        Param Bot
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../05-servo-bot.md">
        Servo Bot
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../20-faqs.md">
        FAQs
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-10" id="nav-10" type="checkbox"/>
<label class="md-nav__link" for="nav-10">
        Debugging
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Debugging" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-10">
<span class="md-nav__icon md-icon"></span>
          Debugging
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../28-debugging-python/">
        Debugging Python
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../29a-debugging-i2c/">
        Debugging I2C
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../29-debugging-spi/">
        Debugging SPI
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../27-ampy/">
        Ampy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../40-gpt-outliner/">
        Content Outliner
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-11" id="nav-11" type="checkbox"/>
<label class="md-nav__link" for="nav-11">
        Circuit Python
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Circuit Python" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-11">
<span class="md-nav__icon md-icon"></span>
          Circuit Python
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../circuit-python/01-intro/">
        Introduction to CircuitPython
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../projects/">
        Projects
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../glossary/">
        Glossary
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../references/">
        References
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../contact/">
        Contact
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../30-colophon/">
        Colophon
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../mermaid-test/">
        Render Test
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#base-robot-design">
    Base Robot Design
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#video">
    Video
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#parts-summary">
    Parts Summary
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hardware-details">
    Hardware Details
  </a>
<nav aria-label="Hardware Details" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#motor-driver">
    Motor Driver
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#time-of-flight-distance-sensor">
    Time-of-Flight Distance Sensor
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#software">
    Software
  </a>
<nav aria-label="Software" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#distance-sensor">
    Distance Sensor
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#testing-the-senser-connections-with-the-i2c-scanner">
    Testing the Senser Connections with the I2C Scanner
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#download-the-vl53l0x-driver">
    Download the VL53L0X Driver
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#time-of-flight-sensor-test">
    Time-of-Flight Sensor Test
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#motor-drive-test">
    Motor Drive Test
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-drive-and-turn-functions">
    Sample Drive and Turn Functions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#turning-logic">
    Turning Logic
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-motor-connections">
    Test Motor Connections
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#drive-functions">
    Drive Functions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#stop-all-motors-program">
    Stop All Motors Program
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#collision-avoidance-logic">
    Collision Avoidance Logic
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#final-program">
    Final Program
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#more-to-explore-labs">
    More To Explore Labs
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/CoderDojoTC/micropython/blob/master/docs/robots/02-base-bot.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1 id="raspberry-pi-pico-micropython-base-robot">Raspberry Pi Pico Micropython Base Robot</h1>
<p><img alt="" src="../../img/pico-bot.jpg"/></p>
<p>This lesson describes out base robot kit in the CoderDojo Twin Cities coding club.  This is a new robot that in programmed entirely in python to be consistent with our <a href="https://www.coderdojotc.org/python/">Python Courses</a>.</p>
<h2 id="base-robot-design">Base Robot Design</h2>
<p>Our goal is to build a robotics platform for teaching computational thinking.  Here are our main design goals:</p>
<ol>
<li>Low cost (under $25) so that most students can afford their own robot</li>
<li>Open platform to make it easy to upgrade (sustainably)</li>
<li>Interchangeable parts</li>
<li>Minimal amount of soldering</li>
</ol>
<h2 id="video">Video</h2>
<p>Here is a video of the collision avoidance robot in action:</p>
<iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/0d3tF1oXu90" title="YouTube video player" width="560"></iframe>
<p><a href="https://youtu.be/0d3tF1oXu90">YouTube Video</a></p>
<p>Note that the <strong>forward-speed</strong> and <strong>distance-before-you-turn</strong> can be adjusted.  You can see I didn't quite get the distance right and the robot bumps into some of the barriers.</p>
<h2 id="parts-summary">Parts Summary</h2>
<p>Here is a summary of some of the parts we use in this robot and their approximate prices as of June 2021.  Some parts come from China so you might need to wait 2-3 weeks for them to arrive.</p>
<p><img alt="" src="../../img/pico-bot-parts-list.png"/></p>
<h2 id="hardware-details">Hardware Details</h2>
<p><a href="https://docs.google.com/spreadsheets/d/1zxPBhhxUG-Uuz9ZlNKY35JYVvpMbK2lfSP81EWPcYM0/edit?usp=sharing">Detailed Parts List Google Sheet</a></p>
<h3 id="motor-driver">Motor Driver</h3>
<p><img alt="" src="../../img/parts/motor-driver.png"/></p>
<h3 id="time-of-flight-distance-sensor">Time-of-Flight Distance Sensor</h3>
<p><img alt="" src="../../img/parts/tof-sensor-GYUN530K.jpg"/></p>
<h2 id="software">Software</h2>
<p>All software is written in Python.  You must include the driver for the </p>
<h3 id="distance-sensor">Distance Sensor</h3>
<p>We are using the VL53L0X time-of-flight distance sensor.  This works on an I2C bus.  After you have hooked up the Power (VCC to the 3.3 rail and GND) you must hook up the I2C data and clock.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">sda</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="c1"># Lower right corner of the Pico with the USB on top</span>
<span class="n">scl</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span> <span class="c1"># One up from the lower right corner of the Pico</span>
<span class="n">i2c</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">I2C</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sda</span><span class="o">=</span><span class="n">sda</span><span class="p">,</span> <span class="n">scl</span><span class="o">=</span><span class="n">scl</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<h3 id="testing-the-senser-connections-with-the-i2c-scanner">Testing the Senser Connections with the I2C Scanner</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">machine</span>
<span class="n">sda</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="c1"># Lower right corner of the Pico with the USB on top</span>
<span class="n">scl</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span> <span class="c1"># One up from the lower right corner of the Pico</span>
<span class="n">i2c</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">I2C</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sda</span><span class="o">=</span><span class="n">sda</span><span class="p">,</span> <span class="n">scl</span><span class="o">=</span><span class="n">scl</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Device found at decimal"</span><span class="p">,</span> <span class="n">i2c</span><span class="o">.</span><span class="n">scan</span><span class="p">())</span>
</code></pre></div>
</td></tr></table>
<p>You should see a decimal number returned.  By default the I2C address is 41 (decimal) or x29 (hexadecimal).</p>
<h3 id="download-the-vl53l0x-driver">Download the VL53L0X Driver</h3>
<p>You will need to add a VL53L0X driver file to the file system on the pico.</p>
<p>We have a copy here: <a href="https://raw.githubusercontent.com/CoderDojoTC/micropython/main/src/drivers/VL53L0X.py">https://raw.githubusercontent.com/CoderDojoTC/micropython/main/src/drivers/VL53L0X.py</a></p>
<h3 id="time-of-flight-sensor-test">Time-of-Flight Sensor Test</h3>
<p>Once the driver file is loaded we are ready to test the time-of-flight distance sensor.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span>
<span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">I2C</span>
<span class="kn">import</span> <span class="nn">VL53L0X</span>

<span class="n">sda</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="c1"># row one on our standard Pico breadboard</span>
<span class="n">scl</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span> <span class="c1"># row two on our standard Pico breadboard</span>
<span class="n">i2c</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">I2C</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sda</span><span class="o">=</span><span class="n">sda</span><span class="p">,</span> <span class="n">scl</span><span class="o">=</span><span class="n">scl</span><span class="p">)</span>

<span class="c1"># Create a VL53L0X object</span>
<span class="n">tof</span> <span class="o">=</span> <span class="n">VL53L0X</span><span class="o">.</span><span class="n">VL53L0X</span><span class="p">(</span><span class="n">i2c</span><span class="p">)</span>
<span class="n">tof</span><span class="o">.</span><span class="n">start</span><span class="p">()</span> <span class="c1"># startup the sensor</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="c1"># Start ranging</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="n">tof</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dist</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="o">.</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<p>When you run this program a sequence of integers will appear in the console.  The numbers usually will range from around 30 if there is an object directly in front of the sensor to a number around 1,300 for a object that is about 1.3 meters away from the sensor.  There is a 1/10th of a second pause between each measurement.  This can be changed in the last line of the program.</p>
<h3 id="motor-drive-test">Motor Drive Test</h3>
<p>After we have the four wires connected to the motor driver, we need to make sure we get the right wires to the right motors and motor directions.  This program will help you debug this.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">PWM</span>
<span class="kn">import</span> <span class="nn">time</span> <span class="c1"># sleep</span>

<span class="n">POWER_LEVEL</span> <span class="o">=</span> <span class="mi">65025</span>
<span class="c1"># lower right pins with USB on top</span>
<span class="n">RIGHT_FORWARD_PIN</span> <span class="o">=</span> <span class="mi">21</span>
<span class="n">RIGHT_REVERSE_PIN</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">LEFT_FORWARD_PIN</span> <span class="o">=</span> <span class="mi">18</span>
<span class="n">LEFT_REVERSE_PIN</span> <span class="o">=</span> <span class="mi">19</span>

<span class="n">right_forward</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">RIGHT_FORWARD_PIN</span><span class="p">))</span>
<span class="n">right_reverse</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">RIGHT_REVERSE_PIN</span><span class="p">))</span>
<span class="n">left_forward</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">LEFT_FORWARD_PIN</span><span class="p">))</span>
<span class="n">left_reverse</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">LEFT_REVERSE_PIN</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">spin_wheel</span><span class="p">(</span><span class="n">pwm</span><span class="p">):</span>
        <span class="n">pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="n">POWER_LEVEL</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'right forward'</span><span class="p">)</span>
    <span class="n">spin_wheel</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">'right reverse'</span><span class="p">)</span>
    <span class="n">spin_wheel</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">'left foward'</span><span class="p">)</span>
    <span class="n">spin_wheel</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">'left_reverse'</span><span class="p">)</span>
    <span class="n">spin_wheel</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<p>One thing to remember is that the "Right" refers to our orientation from the rear of the car or if we were sitting inside the car.  If the robot is facing you with the sensor in the front, it is the wheel on the left that we call the "RIGHT" wheel.  Very confusing!  Using this naming convention will pay of as we are walking behind larger robots.</p>
<h3 id="sample-drive-and-turn-functions">Sample Drive and Turn Functions</h3>
<p>We will need a set of function to drive our robot:</p>
<ol>
<li>Forward: both wheels going forward</li>
<li>Reverse: both wheels going in reverse</li>
<li>Turn Right: The right wheel turning backward and the left going forward</li>
<li>Turn Left: The left wheel turning backward and the right wheel going forward</li>
<li>Stop: all motors off</li>
</ol>
<p>Our challenge is for each of these operations we must change the value of all four PWM signals.  We can never have a motor be going both forward and reverse.  Here are some sample drive functions:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">turn_motor_on</span><span class="p">(</span><span class="n">pwm</span><span class="p">):</span>
   <span class="n">pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="n">POWER_LEVEL</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">turn_motor_off</span><span class="p">(</span><span class="n">pwm</span><span class="p">):</span>
   <span class="n">pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">forward</span><span class="p">():</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">reverse</span><span class="p">():</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">turn_right</span><span class="p">():</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">turn_left</span><span class="p">():</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">stop</span><span class="p">():</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<h3 id="turning-logic">Turning Logic</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="n">read_sensor</span><span class="p">()</span> 
    <span class="k">if</span> <span class="n">dist</span> <span class="o">&lt;</span> <span class="n">TURN_THRESHOLD</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'object detected'</span><span class="p">)</span>
        <span class="n">reverse</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="n">BACKUP_TIME</span><span class="p">)</span>
        <span class="n">turn_right</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="n">TURN_TIME</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">forward</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>
<h3 id="test-motor-connections">Test Motor Connections</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">PWM</span>
<span class="kn">import</span> <span class="nn">time</span> <span class="c1"># sleep</span>

<span class="n">POWER_LEVEL</span> <span class="o">=</span> <span class="mi">65025</span> <span class="c1"># usually a number from 30,000 to max of 65,025</span>
<span class="c1"># lower right pins with USB on top</span>
<span class="n">RIGHT_FORWARD_PIN</span> <span class="o">=</span> <span class="mi">21</span>
<span class="n">RIGHT_REVERSE_PIN</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">LEFT_FORWARD_PIN</span> <span class="o">=</span> <span class="mi">18</span>
<span class="n">LEFT_REVERSE_PIN</span> <span class="o">=</span> <span class="mi">19</span>

<span class="n">right_forward</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">RIGHT_FORWARD_PIN</span><span class="p">))</span>
<span class="n">right_reverse</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">RIGHT_REVERSE_PIN</span><span class="p">))</span>
<span class="n">left_forward</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">LEFT_FORWARD_PIN</span><span class="p">))</span>
<span class="n">left_reverse</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">LEFT_REVERSE_PIN</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">spin_wheel</span><span class="p">(</span><span class="n">pwm</span><span class="p">):</span>
        <span class="n">pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="n">POWER_LEVEL</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'right forward'</span><span class="p">)</span>
    <span class="n">spin_wheel</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">'right reverse'</span><span class="p">)</span>
    <span class="n">spin_wheel</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">'left foward'</span><span class="p">)</span>
    <span class="n">spin_wheel</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">'left_reverse'</span><span class="p">)</span>
    <span class="n">spin_wheel</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<p>After you load this program, watch which wheels turn and in what direction.</p>
<h3 id="drive-functions">Drive Functions</h3>
<p>We will define Python functions for forward, reverse, turn right and turn left.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">POWER_LEVEL</span> <span class="o">=</span> <span class="mi">65025</span>

<span class="k">def</span> <span class="nf">turn_motor_on</span><span class="p">(</span><span class="n">pwm</span><span class="p">):</span>
   <span class="n">pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="n">POWER_LEVEL</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">turn_motor_off</span><span class="p">(</span><span class="n">pwm</span><span class="p">):</span>
   <span class="n">pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">forward</span><span class="p">():</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">reverse</span><span class="p">():</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">turn_right</span><span class="p">():</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">turn_left</span><span class="p">():</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">stop</span><span class="p">():</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<h3 id="stop-all-motors-program">Stop All Motors Program</h3>
<p>One other thing to remember is that the PWM signals continue to be generated even after the main loop has stopped.  This is because on the Pico, the four PWM signals are being continuously generated by an independent processors.  To stop the motors you must run a separate stop program like this:</p>
<p>stop-all-motors.py:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">PWM</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="c1"># lower right pins with USB on top</span>
<span class="n">RIGHT_FORWARD_PIN</span> <span class="o">=</span> <span class="mi">19</span>
<span class="n">RIGHT_REVERSE_PIN</span> <span class="o">=</span> <span class="mi">21</span>
<span class="n">LEFT_FORWARD_PIN</span> <span class="o">=</span> <span class="mi">18</span>
<span class="n">LEFT_REVERSE_PIN</span> <span class="o">=</span> <span class="mi">20</span>

<span class="n">right_forward</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">RIGHT_FORWARD_PIN</span><span class="p">))</span>
<span class="n">right_reverse</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">RIGHT_REVERSE_PIN</span><span class="p">))</span>
<span class="n">left_forward</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">LEFT_FORWARD_PIN</span><span class="p">))</span>
<span class="n">left_reverse</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">LEFT_REVERSE_PIN</span><span class="p">))</span>

<span class="n">right_forward</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">right_reverse</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">left_forward</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">left_reverse</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<p>This can be frustrating at times when you can't find the stop program.  I like to bring the stop program up in a separate tab when I am writing robot motor code.</p>
<div class="admonition to do">
<p class="admonition-title">To</p>
<p>figure out how to write an interrup handler so that when the IDE STOP function is pressed the stop motors (and speaker) are stopped.</p>
</div>
<h3 id="collision-avoidance-logic">Collision Avoidance Logic</h3>
<h2 id="final-program">Final Program</h2>
<p>To get this to work on battery power up you must name the program <strong>main.py</strong> and save it on the Raspberry Pi Pico.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure you have the VL53L0X distance sensor driver installed.</p>
</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">PWM</span>
<span class="kn">from</span> <span class="nn">utime</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">import</span> <span class="nn">VL53L0X</span>

<span class="c1"># used to blink the onboard LED</span>
<span class="n">led_onboard</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>

<span class="c1"># driving parameters</span>
<span class="n">POWER_LEVEL</span> <span class="o">=</span> <span class="mi">65025</span> <span class="c1"># use a value from 20000 to 65025</span>
<span class="n">TURN_THRESHOLD</span> <span class="o">=</span> <span class="mi">400</span> <span class="c1"># 25 cm</span>
<span class="n">TURN_TIME</span> <span class="o">=</span> <span class="o">.</span><span class="mi">25</span> <span class="c1"># seconds of turning</span>
<span class="n">BACKUP_TIME</span> <span class="o">=</span> <span class="o">.</span><span class="mi">75</span> <span class="c1"># seconds of backing up if obstacle detected</span>

<span class="c1"># Motor pins to the L293 H-Bridge</span>
<span class="n">RIGHT_FORWARD_PIN</span> <span class="o">=</span> <span class="mi">21</span>
<span class="n">RIGHT_REVERSE_PIN</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">LEFT_FORWARD_PIN</span> <span class="o">=</span> <span class="mi">18</span>
<span class="n">LEFT_REVERSE_PIN</span> <span class="o">=</span> <span class="mi">19</span>

<span class="c1"># setup the PWM objects</span>
<span class="n">right_forward</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">RIGHT_FORWARD_PIN</span><span class="p">))</span>
<span class="n">right_reverse</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">RIGHT_REVERSE_PIN</span><span class="p">))</span>
<span class="n">left_forward</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">LEFT_FORWARD_PIN</span><span class="p">))</span>
<span class="n">left_reverse</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">LEFT_REVERSE_PIN</span><span class="p">))</span>

<span class="n">sda</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="c1"># row one on our standard Pico breadboard</span>
<span class="n">scl</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span> <span class="c1"># row two on our standard Pico breadboard</span>
<span class="n">i2c</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">I2C</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sda</span><span class="o">=</span><span class="n">sda</span><span class="p">,</span> <span class="n">scl</span><span class="o">=</span><span class="n">scl</span><span class="p">)</span>

<span class="c1"># Create a VL53L0X object</span>
<span class="n">tof</span> <span class="o">=</span> <span class="n">VL53L0X</span><span class="o">.</span><span class="n">VL53L0X</span><span class="p">(</span><span class="n">i2c</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">turn_motor_on</span><span class="p">(</span><span class="n">pwm</span><span class="p">):</span>
   <span class="n">pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="n">POWER_LEVEL</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">turn_motor_off</span><span class="p">(</span><span class="n">pwm</span><span class="p">):</span>
   <span class="n">pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">forward</span><span class="p">():</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">reverse</span><span class="p">():</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">turn_right</span><span class="p">():</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">turn_left</span><span class="p">():</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_on</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">stop</span><span class="p">():</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">right_reverse</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_forward</span><span class="p">)</span>
    <span class="n">turn_motor_off</span><span class="p">(</span><span class="n">left_reverse</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">read_sensor_avg</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="n">total</span> <span class="o">=</span> <span class="n">total</span> <span class="o">+</span> <span class="n">tof</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="o">.</span><span class="mi">01</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">total</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>

<span class="n">tof</span><span class="o">.</span><span class="n">start</span><span class="p">()</span> <span class="c1"># startup the sensor</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="n">read_sensor_avg</span><span class="p">();</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dist</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">dist</span> <span class="o">&lt;</span> <span class="n">TURN_THRESHOLD</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'object detected'</span><span class="p">)</span>
        <span class="n">reverse</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="n">BACKUP_TIME</span><span class="p">)</span>
        <span class="n">led_onboard</span><span class="o">.</span><span class="n">high</span><span class="p">()</span>
        <span class="n">turn_right</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="n">TURN_TIME</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">dist</span> <span class="o">&gt;</span> <span class="mi">1300</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'no signal'</span><span class="p">)</span>
            <span class="n">led_onboard</span><span class="o">.</span><span class="n">low</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Go forward'</span><span class="p">)</span>
            <span class="n">led_onboard</span><span class="o">.</span><span class="n">high</span><span class="p">()</span>
        <span class="n">forward</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>
<h2 id="more-to-explore-labs">More To Explore Labs</h2>
<ol>
<li>Can you change the hard-coded parameters at the begging of the program?  What happens when you make the POWER_LEVEL go too high and the TURN_THRESHOLD too low?</li>
<li>What is the lowest POWER_LEVEL that will allow the robot to move?  What if you changed the power from 6 volts to be 9 volts by adding two more AA batteries?</li>
<li>Can you randomly turn right or left if you encounter and object?  Note you will need to import the random library and generate a random number between 0 and 2 with the random.randint(0,2) function.</li>
<li>How would you design a robot that you could adjust the parameters?  What parameters would you change?  What would their valid ranges be?</li>
</ol>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a class="md-flex md-footer-nav__link md-footer-nav__link--prev" href="../01-intro/" rel="prev" title="Introduction">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                    Previous
                  </span>
                  Introduction
                </span>
</div>
</a>
<a class="md-flex md-footer-nav__link md-footer-nav__link--next" href="../04-param-bot/" rel="next" title="Param Bot">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                    Next
                  </span>
                  Param Bot
                </span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
          
            All content including images are licenses under 
            <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons 
              Attribution NonCommercial ShareAlike</a>
</div>
</div>
</div>
</footer>
</div>
<script src="../../assets/javascripts/vendor.93c04032.min.js"></script>
<script src="../../assets/javascripts/bundle.83e5331e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
<script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
</body>
</html>